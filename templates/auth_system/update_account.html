{% extends 'base.html' %}

{% block title %}
    Змінити акаунт
{% endblock title %}

{% block content %}
    <div class="card">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group-my">
                <h1>Оновлення профілю</h1>
            </div>
            <div class="form-group-my">
                <div style="max-width: 100%;">
                    <img id="preview" class="account_img_preview" src="" alt="Превью зображення" style="display: none; max-width: 100%;">
                </div>
                <label class="mt-3" for="id_photo">Фото:</label>
                {{ form.photo }}
            </div>
            <div class="form-group-my">
                <label for="id_username">Ім'я:</label>
                {{ form.username }}
            </div>
            <div class="form-group-my">
                <label class="mt-3" for="id_email">Пошта:</label>
                {{ form.email }}
            </div>
            <div class="form-group-my">
                <label class="mt-3" for="id_description">Опис:</label>
                {{ form.description }}
                <center><button type="submit" class="btn-my mt-3">Оновити</button></center>
            </div>
        </form>
        <a href="{% url 'auth_system:account' user.pk %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="black" class="bi bi-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
            </svg>
        </a>
    </div>

<script>
    const input = document.getElementById('id_photo');
    const preview = document.getElementById('preview');

    input.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        } else {
            preview.style.display = 'none';
        }
    });
</script>
{% endblock content %}
